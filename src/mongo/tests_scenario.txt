Работаем над интеграционным тестом в файле @src/mongo/tests.rs .
Основная задача имитировать действия пользователя с GUI элементами, что бы проверить бизнес логику, которая вызывается после взаимодействия с GUI.
Тестирование производится технически через отправку Message в update() приложения, с предварительной подготовкой окружения, например инициализацией нужных UI элементов и заполнением их данными.

Ниже будут цифрами указаны шаги и ожидаемое поведение либо результат действия. При реализации их в коде теста должен быть соответсвующий комментарий, что бы было легко понять где какой шаг выполняется.

1.1 Нажать меню "Соединения". Откровыется окно "Соединения".
1.2 Нажать кнопку "Создать". Открывается окно "Новое соединение".
1.3 Заполняю необходимые поля "Название" случайной строкой (якорь NEW_CONNECTION), "Хост" localhost , "Порт" 27017.
1.4 Нажимаю кнопку "Сохранить". Окно "Новое соединение" закрывается, остается окно "Соединения", в списке соединений появляется свеже созданное подключение.
1.5 Выбираю нужное подключение. Нажимаю кнопку "Соединить". Окно "Соединения" закрывается. На главном окне в панели слева появляется список Баз данных.
2.1 Проверка что в левой панели список баз данных пустой.
2.2.1 В левой панели вызвать у соединения контекстное меню. Активировать пункт "Создать базу данных". Появится окно "Создать базу данных", заполнить поля ввода "Название базы данных" случайной строкой (якорь NEW_DB_NAME_1), "Имя первой коллекции" случайной строкой (якорь COLLECTION_NAME_1). Нажать кнопку "Создать". Проверка что в левой панели в списке баз данных количество баз данных строго 1, название этой базы соответствует NEW_DB_NAME_1.
2.2.2 В левой панели вызвать у соединения контекстное меню. Активировать пункт "Создать базу данных". Появится окно "Создать базу данных", заполнить поля ввода "Название базы данных" случайной строкой (якорь NEW_DB_NAME_2, "Имя первой коллекции" случайной строкой (якорь COLLECTION_NAME_1). Нажать кнопку "Создать". Проверка что в левой панели в списке баз данных количество баз данных строго 2, название этой базы соответствует NEW_DB_NAME_1 и NEW_DB_NAME_2.
2.3 В левой панели в списке баз данных развернуть базу NEW_DB_NAME_1 и получить список коллекций. Провека что количество коллекций строго 1, с названием COLLECTION_NAME_1.
2.4 В левой панели у базы данных NEW_DB_NAME_1 вызвать контексное меню и активировать пункт "Создать коллекцию". Откроется окно "Создать коллекцию". Заполнить поле ввода "Имя коллекции" случайной строкой (якорь COLLECTION_NAME_2). Нажать кнопку "Создать". Получить список коллекций базы данных NEW_DB_NAME_1. Проверка количества коллекций строго 2, названия коллекций соответтсвуют COLLECTION_NAME_1 и COLLECTION_NAME_2.
2.5 В левой панели у базы данных NEW_DB_NAME_1 на коллекции COLLECTION_NAME_1 вызвать контексное меню, активировать пункт "Открыть пустую вкладку". Проверка количество вкладок основного окна должно быть строго 1.
3.1 В основном окне, на первой вкладке, в редакторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_1).find({}).count({})`, нажать кнопку "Отправить". Проверка результата запроса - в таблице с данными должно отобразиться значение 0.
3.2 В основном окне, в первой вкладке, в редкаторе запрос ввести запрос `db.getCollection(COLLECTION_NAME_1).insertOne({
    string1: "Пример строки",
    string2: String("через конструктор String"),
    int32_1: NumberInt(42),
    int32_2: NumberInt("42"),
    long1: NumberLong(9007199254740991),
    long2: NumberLong("9007199254740991"),
    long3: NumberLong(42),
    double1: 3.14159,
    double2: Number(2.5),
    double3: Infinity,
    double4: -Infinity,
    double5: NaN,
    decimal1: NumberDecimal("12345.6789"),
    decimal2: NumberDecimal("1E-28"),
    decimal3: NumberDecimal("0.30000000000000004"),
    bool1: true,
    bool2: Boolean(false),
    date1: new Date(),
    date2: ISODate(),
    date3: ISODate("2025-10-14T15:30:00Z"),
    date4: new Date("2025-10-14T15:30:00Z"),
    date5: new Date(2025, 9, 14, 17, 0, 0, 0),
    date6: new Date(0),
    array1: [1, 2, 3, "текст"],
    array2: new Array(1, 2, 3),
    object1: { a: 1, b: "строка" },
    object2: Object({ x: 10, y: 20 }),
    null1: null,
    regex1: /mongodb/i,
    regex2: new RegExp("mon(go|godb)", "i"),
    objectId1: ObjectId(),
    objectId2: ObjectId("64e9c4a9c2c1b3a5f1d0eabc"),
    objectId3: ObjectId.fromDate(ISODate("2020-01-01T00:00:00Z")),
    binary1: new BinData(0, "YWJjZGVmZw=="),
    binary2: HexData(0, "DEADBEEF"),
    uuid1: UUID(),
    uuid2: UUID("12345678-1234-5678-9abc-123456789abc"),
    timestamp1: Timestamp(1680000000, 1),
    timestamp2: Timestamp(ISODate("2023-03-28T00:00:00Z").getTime()/1000, 5),
    minKey1: MinKey(),
    maxKey1: MaxKey(),
    undefined1: undefined,
    js1: new Code("function() { return 2 + 2; }"),
    js2: function() { return 40 + 2; },
    jsWithScope1: new Code(
      "function(x) { return x + y; }",
      { y: 5 }
      ),
    dbref1: DBRef("users", ObjectId("64e9c4a9c2c1b3a5f1d0eabc")),
    dbref2: DBRef("users", ObjectId(), "otherDb")
})`, нажать кнопку "Отправить". Проверка, в таблице результатов будет записано "operation" со значением "insertOne", "insertedId" со значением типа ObjectId.
3.3  В основном окне, на первой вкладке, в редакторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_1).find({}).count({})`, нажать кнопку "Отправить". Проверка результата запроса - в таблице с данными должно отобразиться значение 1.
3.4  В сновном окне, на первой вкладке, в редакторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_1).insertMany([{value: 10}, {value: 11}])`, нажать кнопку "Отправить". Проверка, в таблице результатов будет записано "operation" со значением "insertMany", "insertedCount" со значением 2.
3.5 В левой панели у базы данных NEW_DB_NAME_1 на коллекции COLLECTION_NAME_1 вызвать контексное меню, активировать пункт "Посмотреть документы". В таблице будет отображено 4 документа.
3.6 В талблице результатов у первого документа вызвать контексное меню, активировать меню "Изменить документ...". Появится окно редактирования всего документа. Скопировать от туда значение ключа "_id". Добавить его в текст ниже
{
    "string1": "Пример строки1",
    "string2": String("через конструктор String1"),
    "int32_1": NumberInt(421),
    "int32_2": NumberInt("421"),
    "long1": NumberLong(90071992547409911),
    "long2": NumberLong("90071992547409911"),
    "long3": NumberLong(421),
    "double1": 3.141591,
    "double2": Number(2.51),
    "double3": -Infinity,
    "double4": Infinity,
    "decimal1": NumberDecimal("12345.67891"),
    "decimal2": NumberDecimal("1E-21"),
    "decimal3": NumberDecimal("0.300000000000000041"),
    "bool1": false,
    "bool2": Boolean(true),
    "date3": ISODate("2025-10-14T15:30:01Z"),
    "date4": new Date("2025-10-14T15:30:01Z"),
    "date5": new Date(2025, 9, 14, 17, 0, 0, 1),
    "date6": new Date(1),
    "array1": [1, 2, 3, "текст1"],
    "array2": new Array(1, 2, 31),
    "object1": { a: 11, b: "строка1" },
    "object2": Object({ x: 101, y: 201 }),
    "regex1": /mongodb1/i,
    "regex2": new RegExp("mon(go|godb)1", "i"),
    "objectId2": ObjectId("64e9c4a9c2c1b3a5f1d0eab1"),
    "objectId3": ObjectId.fromDate(ISODate("2020-01-01T00:00:01Z")),
    "binary2": HexData(0, "DEADBEEF1"),
    "uuid2": UUID("12345678-1234-5678-9abc-123456789ab1"),
    "timestamp1": Timestamp(1680000001, 1),
    "timestamp2": Timestamp(ISODate("2023-03-21T00:00:00Z").getTime()/1000, 5),
}
и сформировать из текста в коде теста переменную с именем "updated_data". Заменить текст в текстовом виджете в окне "Изменение документа" на содержимое переменной "updated_data". Нажать кнопку "Сохранить". Окно закроется. В текстовом редакторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_1).count()` поместив в качестве аргумента для count содержимое переменной "updated_data". Нажать кнопку "Отправить". Проверка, в качестве результат запроса в таблице результатов будет значение 0.
3.7.1 В текстовом редакторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_1).find()`, нажать кнопку "Отправить". Проверка в таблице результатов будет 4 документа.
3.7.2 В первом документе найти строчку таблицы с ключом `array1`, раскрыть массив, найти строчку со значением `2`, вызывать на ней контекстное меню. активировать пункт "Изменить только значение...". Появится окно изменение значения. В текстовом редакторе заменить содержимое на `2.0`. Проверка в виджете `Тип значение` должно быть значение `Double`. Нажать кнопку `Сохранить`, окно закроется.
3.7.3 В редакторе запроса ввести текст `db.getCollection(COLLECTION_NAME_1).find({"array1.1": NumberDouble("2.0")}).count()`, нажать кнопку "Отправить". ПРоверки в таблице результатов должно быть значение `1`.
4.1.1 В левой панели у базы данных NEW_DB_NAME_1 на коллекции COLLECTION_NAME_2 вызвать контексное меню, активировать пункт "Открыть пустую вкладку". Проверка количество вкладок основного окна должно быть строго 1.
4.1.2 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).insertMany([
    {
        "name": "Alex",
        "department": "IT",
        "starts": ISODate("2020-02-01"),
        "points": 10
    },
    {
        "name": "Alex",
        "department": "Support",
        "starts": ISODate("2018-03-10"),
        "points": 8
    },
    {
        "name": "Anya",
        "department": "IT",
        "starts": ISODate("2020-06-15"),
        "points": 20
    },
    {
        "name": "Mark",
        "department": "Devops",
        "starts": ISODate("2019-05-01"),
        "points": 12
    }
])
4.2.1 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).find({})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 4 документа.
4.2.2 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).find({name: "unknown"})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 0 документов.
4.2.3 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).find({department: "IT", name: {$in: ["Alex", "Anya"]}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 2 документа.
4.2.4 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).find({starts: {$gt: ISODate('2020-01-01'), $lt: ISODate("2021-01-01")}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 2 документа.
4.3 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).findOne({starts: {$gt: ISODate('2020-01-01'), $lt: ISODate("2021-01-01")}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ.
4.4 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).aggregate([{$match: {$department: "IT"}}, {$group: {_id: null, total: {$sum: "$points"}, count: {$sum: 1}}}, {$project: {avg: {$div: ["$total", "$count"]}}}])`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ, `value` которого равен `15`.
4.5 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).distinct('name', {points: {$lt: 20}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть массив строк `["Alex", "Anya", "Mark"]`.
4.6.1 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).count()`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ, `value` которого равен `4`.
4.6.2 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).countDocuments()`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ, `value` которого равен `4`.
4.6.3 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).estimatedDocumentCount()`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ, `value` которого равен `4`.
4.7.1 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).findOneAndUpdate({name: 'Alex', department: 'IT'}, {$set: {"points": 20}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ. У него должно быть поле `points` со значением `10`.
4.7.2 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).updateOne({name: 'Anya'}, {$set: {points: 30}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ. В поле `acknowledged` должно быть значение true, в поле `matchedCount` значение 1.0, в поле `modifiedCount` значение 1.0
4.7.3 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).findAndModify({query: {name: 'Alex', department: 'Support'}, update:{$inc: {points: 20}}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ. В поле `points` должно быть значение 8.
4.7.4 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).findAndModify({query: {name: 'Alex', department: 'Support'}, update:{$dec: {points: 10}}, new: true})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ. В поле `points` должно быть значение 18.
4.7.5 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).findOneAndReplace({name: 'Mark'}, {name: 'Markus', department: 'Devops', "starts": ISODate("2019-05-01"), points: 22})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ.Проверка в таблице результатов должно быть 1 документ. В поле `points` должно быть значение 12.
4.7.6 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).replaceOne({name: 'Markus'}, {name: 'Markus', department: 'Devops', "starts": ISODate("2019-05-01"), points: 25})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ. В поле `acknowledged` должно быть значение true, в поле `matchedCount` значение 1.0, в поле `modifiedCount` значение 1.0
4.7.7 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).updateMany({points: {$gt: 0}}, {$inc: {points: 100}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ. В поле `acknowledged` должно быть значение true, в поле `matchedCount` значение 4.0, в поле `modifiedCount` значение 4.0.
4.7.8 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).aggregate([{$group: {_id: null, total: {$sum: "$points"}}}])`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ, `value` которого равен `493`.
4.8.1 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).findOneAndDelete({name: 'Alex'}, {sort: {points: -1}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ. В поле `department` должно быть значение `IT`.
4.8.2 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).deleteOne({name: 'Alex'})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ. В поле `acknowledged` должно быть значение true, в поле `deletedCount` значение 1.0. В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).find({name: "Alex"})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 0 документов. В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).find({})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 2 документf.
4.8.3 В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).deleteMany({points: {$gt: 0}})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 1 документ. В поле `acknowledged` должно быть значение true, в поле `deletedCount` значение 1.0. В основном окне в редкаторе запроса ввести запрос `db.getCollection(COLLECTION_NAME_2).find({})`, нажать кнопку `Отправить`. Проверка в таблице результатов должно быть 0 документов.
